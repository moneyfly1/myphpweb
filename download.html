<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>å®‰å“æ‰‹æœºåœ¨çº¿å®‰è£…è½¯ä»¶</title>
<style>
  body {
    font-family: Arial, sans-serif;
    text-align: center;
    margin: 0;
    padding: 20px;
    background-color: #f9f9f9;
    color: #333;
  }

  h1 {
    font-size: 36px;
    margin-bottom: 20px;
    color: #333;
  }

  p {
    font-size: 18px;
    margin-top: 10px;
  }

  .download-container {
    display: grid;
    grid-template-columns: repeat(3, 1fr); /* å›ºå®šæ¯æ’ 3 ä¸ª */
    gap: 20px; /* å¡ç‰‡ä¹‹é—´çš„é—´è· */
    justify-content: center;
    margin-top: 30px;
    max-width: 1200px; /* å®½åº¦é™åˆ¶ï¼Œé¿å…è¿‡äºå®½å± */
    margin-left: auto;
    margin-right: auto;
  }

  .download-item {
    background-color: #fff;
    border: 1px solid #ddd;
    border-radius: 8px;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    text-align: center;
    padding: 20px;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
  }

  .download-item:hover {
    transform: translateY(-5px);
    box-shadow: 0 6px 12px rgba(0, 0, 0, 0.15);
  }

  .download-item a {
    display: inline-block;
    text-decoration: none;
    font-size: 16px;
    color: #fff;
    background-color: #007bff;
    padding: 10px 20px;
    border-radius: 5px;
    margin-top: 10px;
    transition: background-color 0.3s ease;
  }

  .download-item a:hover {
    background-color: #0056b3;
  }

  .download-item .install-message {
    display: none;
    font-size: 14px;
    color: #28a745;
    margin-top: 10px;
  }

  @media (max-width: 768px) {
    .download-container {
      grid-template-columns: repeat(2, 1fr); /* ä¸­ç­‰å±å¹•æ¯æ’æ˜¾ç¤º 2 ä¸ª */
    }
  }

  @media (max-width: 480px) {
    .download-container {
      grid-template-columns: 1fr; /* å°å±å¹•æ¯æ’æ˜¾ç¤º 1 ä¸ª */
    }
  }
</style>
</head>
<body>
  <h1>å®¢æˆ·ç«¯è½¯ä»¶ä¸‹è½½ä¸­å¿ƒ</h1>
  <p>è¯·æ ¹æ®æ‚¨çš„è®¾å¤‡ç±»å‹é€‰æ‹©å¯¹åº”çš„å®¢æˆ·ç«¯è½¯ä»¶ï¼š</p>
  <p style="color: #666; font-size: 14px; margin-bottom: 20px;">
    ğŸ’¡ æç¤ºï¼šMacç”¨æˆ·è¯·æ ¹æ®èŠ¯ç‰‡ç±»å‹é€‰æ‹©å¯¹åº”ç‰ˆæœ¬ï¼šIntelèŠ¯ç‰‡é€‰æ‹©Intelç‰ˆæœ¬ï¼ŒM1/M2/M3ç­‰è‹¹æœèŠ¯ç‰‡é€‰æ‹©ARMç‰ˆæœ¬ã€‚
  </p>

  <div class="download-container">
    <!-- Androidå®¢æˆ·ç«¯ -->
    <div class="download-item">
      <h3>Androidå®¢æˆ·ç«¯</h3>
      <a id="dl-android" href="#" download="" onclick="showInstallMessage(this)">ç‚¹å‡»ä¸‹è½½</a>
      <p class="install-message">è¯·ç­‰å¾…æ–‡ä»¶ä¸‹è½½å®Œæˆ...</p>
    </div>

    <!-- Windowså®¢æˆ·ç«¯ -->
    <div class="download-item">
      <h3>Windowså®¢æˆ·ç«¯ (x64)</h3>
      <a id="dl-win" href="#" download="" onclick="showInstallMessage(this)">ç‚¹å‡»ä¸‹è½½</a>
      <p class="install-message">è¯·ç­‰å¾…æ–‡ä»¶ä¸‹è½½å®Œæˆ...</p>
    </div>

    <!-- Mac IntelèŠ¯ç‰‡ -->
    <div class="download-item">
      <h3>Mac IntelèŠ¯ç‰‡</h3>
      <a id="dl-mac-intel" href="#" download="" onclick="showInstallMessage(this)">ç‚¹å‡»ä¸‹è½½</a>
      <p class="install-message">è¯·ç­‰å¾…æ–‡ä»¶ä¸‹è½½å®Œæˆ...</p>
    </div>

    <!-- Mac è‹¹æœèŠ¯ç‰‡ -->
    <div class="download-item">
      <h3>Mac è‹¹æœèŠ¯ç‰‡</h3>
      <a id="dl-mac-arm" href="#" download="" onclick="showInstallMessage(this)">ç‚¹å‡»ä¸‹è½½</a>
      <p class="install-message">è¯·ç­‰å¾…æ–‡ä»¶ä¸‹è½½å®Œæˆ...</p>
    </div>

    <!-- iOSå®¢æˆ·ç«¯ -->
    <div class="download-item">
      <h3>iOSå®¢æˆ·ç«¯ - Shadowrocket</h3>
      <a href="https://apps.apple.com/app/shadowrocket/id932747118" target="_blank" onclick="showInstallMessage(this)">App Storeä¸‹è½½</a>
      <p class="install-message">è¯·ç­‰å¾…æ–‡ä»¶ä¸‹è½½å®Œæˆ...</p>
    </div>

    <!-- iOSå®¢æˆ·ç«¯ -->
    <div class="download-item">
      <h3>iOSå®¢æˆ·ç«¯ - Quantumult X</h3>
      <a href="https://apps.apple.com/app/quantumult-x/id1443988620" target="_blank" onclick="showInstallMessage(this)">App Storeä¸‹è½½</a>
      <p class="install-message">è¯·ç­‰å¾…æ–‡ä»¶ä¸‹è½½å®Œæˆ...</p>
    </div>
  </div>

  <script>
    function showInstallMessage(element) {
      var installMessage = element.nextElementSibling;
      installMessage.style.display = 'block';
    }

    // GitHubåŠ é€ŸæœåŠ¡é…ç½®ï¼ˆæŒ‰ç¨³å®šæ€§æ’åºï¼‰
    const githubMirrors = [
      'https://ghfast.top',
      'https://ghproxy.com', 
      'https://github.91chi.fun'
    ];

    // æ™ºèƒ½ä¸‹è½½é“¾æ¥è®¾ç½®ï¼Œä½¿ç”¨æœ€ç¨³å®šçš„åŠ é€ŸæœåŠ¡
    async function setDownloadLink(repo, assetMatch, btnId) {
      try {
        const response = await fetch(`https://api.github.com/repos/${repo}/releases/latest`);
        const data = await response.json();
        const asset = data.assets.find(a => a.name.match(assetMatch));
        
        if (asset) {
          const btn = document.getElementById(btnId);
          // ä½¿ç”¨URLç¼–ç æ–¹å¼æ„å»ºåŠ é€Ÿé“¾æ¥
          const acceleratedUrl = githubMirrors[0] + '/?q=' + encodeURIComponent(asset.browser_download_url);
          btn.href = acceleratedUrl;
          btn.innerText = 'ä¸‹è½½æœ€æ–°ç‰ˆ';
          console.log(`è®¾ç½®ä¸‹è½½é“¾æ¥: ${acceleratedUrl}`);
        } else {
          document.getElementById(btnId).innerText = 'æœªæ‰¾åˆ°å®‰è£…åŒ…';
        }
      } catch (error) {
        document.getElementById(btnId).innerText = 'è·å–å¤±è´¥';
        console.error('è·å–ä¸‹è½½é“¾æ¥å¤±è´¥:', error);
      }
    }

    // è®¾ç½®å„å¹³å°çš„ä¸‹è½½é“¾æ¥
    setDownloadLink('xishang0128/sparkle', /windows.*x64.*setup.*\.exe$/i, 'dl-win');
    setDownloadLink('xishang0128/sparkle', /macos.*x64.*(pkg|dmg)$/i, 'dl-mac-intel');
    setDownloadLink('xishang0128/sparkle', /macos.*arm64.*(pkg|dmg)$/i, 'dl-mac-arm');
    setDownloadLink('MetaCubeX/ClashMetaForAndroid', /arm64.*release.*\.apk$/i, 'dl-android');
  </script>
</body>
</html>