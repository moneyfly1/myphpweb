<extend name="Public:layout" />
<block name="title">登录历史</block>
<block name="content">
<div class="home-page">
    <div class="page-header">
        <h2>登录历史</h2>
    </div>
    <if condition="$list">
    <div class="home-card" style="padding:0;overflow:hidden;">
        <!-- 桌面端表格 -->
        <div class="home-desktop-table">
            <table class="home-table">
                <thead>
                    <tr>
                        <th>时间</th>
                        <th>IP地址</th>
                        <th>设备类型</th>
                        <th>浏览器/客户端</th>
                        <th>状态</th>
                    </tr>
                </thead>
                <tbody>
                    <foreach name="list" item="v">
                    <tr>
                        <td>{$v['login_time_fmt']}</td>
                        <td>{$v['ip_address']}</td>
                        <td>{$v['device_type']}</td>
                        <td>{$v['user_agent']|mb_substr=0,80,'UTF-8'}</td>
                        <td>
                            <if condition="$v['login_status'] eq 1">
                                <span class="home-badge" style="background:rgba(72,199,142,.15);color:var(--color-success);">成功</span>
                            <else />
                                <span class="home-badge" style="background:rgba(245,108,108,.15);color:var(--color-danger);">失败</span>
                            </if>
                        </td>
                    </tr>
                    </foreach>
                </tbody>
            </table>
        </div>
        <!-- 移动端卡片 -->
        <div class="home-mobile-cards" style="padding:16px;">
            <foreach name="list" item="v">
            <div class="home-m-card">
                <div class="m-card-header">
                    <span class="m-card-title">{$v['login_time_fmt']}</span>
                    <if condition="$v['login_status'] eq 1">
                        <span class="home-badge" style="background:rgba(72,199,142,.15);color:var(--color-success);">成功</span>
                    <else />
                        <span class="home-badge" style="background:rgba(245,108,108,.15);color:var(--color-danger);">失败</span>
                    </if>
                </div>
                <div class="m-card-row"><span class="m-label">IP</span><span class="m-value">{$v['ip_address']}</span></div>
                <div class="m-card-row"><span class="m-label">设备</span><span class="m-value">{$v['device_type']}</span></div>
                <div class="m-card-row"><span class="m-label">客户端</span><span class="m-value" style="font-size:12px;">{$v['user_agent']|mb_substr=0,60,'UTF-8'}</span></div>
            </div>
            </foreach>
        </div>
    </div>
    <else />
    <div class="home-empty">
        <i class="fas fa-history"></i>
        <p>暂无登录记录</p>
    </div>
    </if>
    <a href="/" style="display:inline-flex;align-items:center;margin-top:20px;color:var(--color-primary);text-decoration:none;font-size:0.9rem;min-height:44px;">&larr; 返回首页</a>
</div>
</block>
