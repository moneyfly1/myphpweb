<extend name="Public:base" />
<block name="title">编辑节点</block>
<block name="content">
    <style>
        .table { width:100%; border-collapse:collapse; margin-bottom:20px; background:white; border-radius:8px; overflow:hidden; box-shadow:0 2px 8px rgba(0,0,0,0.1); }
        .table th { background:#f8f9fa; border:1px solid #dee2e6; padding:15px 20px; text-align:left; font-weight:600; color:#495057; width:150px; vertical-align:top; font-size:14px; }
        .table td { border:1px solid #dee2e6; padding:15px 20px; vertical-align:top; background:white; }
        .input-medium { width:100%; min-width:400px; padding:12px 15px; border:1px solid #ced4da; border-radius:6px; font-size:14px; line-height:1.5; transition:border-color 0.3s ease,box-shadow 0.3s ease; background:#fafafa; }
        .input-medium:focus { outline:none; border-color:#1677ff; box-shadow:0 0 0 3px rgba(22,119,255,0.1); background:white; }
        select.input-medium { appearance:auto; }
        textarea.input-medium { min-height:100px; resize:vertical; }
        .inputword { font-size:14px; margin-right:10px; color:#495057; font-weight:500; }
        @media (max-width:768px) {
            .input-medium { min-width:100%; font-size:16px; padding:12px; }
            .table th { width:100px; padding:12px 10px; font-size:13px; }
            .table td { padding:12px 10px; }
        }
    </style>
    <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="{:U('Admin/Index/index')}"><i class="fa fa-home"></i> 首页</a></li>
            <li class="breadcrumb-item"><a href="{:U('Admin/NodeMgr/index')}">节点管理</a></li>
            <li class="breadcrumb-item active">编辑节点</li>
        </ol>
    </nav>
    <div class="page-navigation">
        <a href="{:U('Admin/Index/index')}" class="nav-item"><i class="fa fa-home"></i> 首页</a>
        <div class="nav-separator">/</div>
        <a href="{:U('Admin/NodeMgr/index')}" class="nav-item">节点管理</a>
        <div class="nav-separator">/</div>
        <div class="nav-item active">编辑节点</div>
    </div>
    <div class="page-content">
        <div class="card">
            <div class="card-header">
                <div class="d-flex justify-content-start">
                    <ul class="nav nav-tabs border-0">
                        <li class="nav-item"><a class="nav-link" href="{:U('Admin/NodeMgr/index')}">节点列表</a></li>
                        <li class="nav-item"><a class="nav-link active" href="javascript:;">编辑节点</a></li>
                        <li class="nav-item"><a class="nav-link" href="{:U('Admin/NodeMgr/collect')}">采集节点</a></li>
                        <li class="nav-item"><a class="nav-link" href="{:U('Admin/NodeMgr/assignNode')}">节点分配</a></li>
                    </ul>
                </div>
            </div>
            <div class="card-body">
<!-- PLACEHOLDER_EDIT_FORM -->
                <form method="post" action="{:U('Admin/NodeMgr/edit')}" data-ajax="true" data-redirect="reload">
                    <input type="hidden" name="id" value="{$data['id']}">
                    <table class="table">
                        <tr>
                            <th>节点名称</th>
                            <td><input class="input-medium" type="text" name="name" value="{$data['name']}" required></td>
                        </tr>
                        <tr>
                            <th>服务器地址</th>
                            <td><input class="input-medium" type="text" name="server" value="{$data['server']}" required></td>
                        </tr>
                        <tr>
                            <th>端口</th>
                            <td><input class="input-medium" type="number" name="port" value="{$data['port']}" required></td>
                        </tr>
                        <tr>
                            <th>协议类型</th>
                            <td>
                                <select class="input-medium" name="type">
                                    <option value="vmess" <?php if($data['type']=='vmess') echo "selected"; ?>>VMess</option>
                                    <option value="vless" <?php if($data['type']=='vless') echo "selected"; ?>>VLESS</option>
                                    <option value="trojan" <?php if($data['type']=='trojan') echo "selected"; ?>>Trojan</option>
                                    <option value="ss" <?php if($data['type']=='ss') echo "selected"; ?>>Shadowsocks</option>
                                    <option value="hysteria2" <?php if($data['type']=='hysteria2') echo "selected"; ?>>Hysteria2</option>
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <th>排序</th>
                            <td><input class="input-medium" type="number" name="sort_order" value="{$data['sort_order']}"></td>
                        </tr>
                        <tr>
                            <th>是否可见</th>
                            <td>
                                <span class="inputword">是</span> <input type="radio" name="is_visible" value="1" <?php if($data['is_visible']==1) echo "checked='checked'"; ?>> &emsp;
                                <span class="inputword">否</span> <input type="radio" name="is_visible" value="0" <?php if($data['is_visible']==0) echo "checked='checked'"; ?>>
                            </td>
                        </tr>
                        <tr>
                            <th>备注</th>
                            <td><textarea class="input-medium" name="remark">{$data['remark']}</textarea></td>
                        </tr>
                        <tr>
                            <th></th>
                            <td><input class="btn btn-success" type="submit" value="修改"></td>
                        </tr>
                    </table>
                </form>
            </div>
        </div>
    </div>
</block>
